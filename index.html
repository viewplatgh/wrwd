<!DOCTYPE HTML>
<html>
<head>
    <title>RWD web edition</title>
    <link rel="stylesheet" href="css/jquery-ui-themes/base/jquery.ui.all.css" />
    <link rel="stylesheet" href="css/jquery.layout-1.3.0.css" />
    <link rel="stylesheet" href="css/wrwd1.css" />
    <script src="js/jquery-1.9.1.js"></script>
    <script src="js/ui/jquery-ui.js"></script>
    <script src="js/jquery.layout-1.3.0.js"></script>
    <script src="js/jquery.console.js"></script>
    <script src="js/wrwd1.js"></script>
    <script>
        var wrwd = {
            output : function (text) {
                line = $("<div class=\"wrwd-output\"></div>")
                line.text(text);
                $(".middle-center").append(line);                
            },
            cmdParse : function(line) {
                var argv = line.split(' ');
                var optstr;
                switch(argv[0]) {
                    case 'new':
                        optstr = 'f:(file)p:(page)w:(word)h:(phon)s:(source)i:(interp)e:(examp)r:(rem)';
                        //optstr = 'f:(file)';
                        argv.shift();
                        argv.unshift('');
                        argv.unshift('new');

                        var parser, option;

                        parser = new goBasicParser(optstr, argv);

                        while ((option = parser.getopt()) !== undefined) {
                            switch (option.option) {
                            case 'f':
                                wrwd.output('option "f" is set, optarg=' + option.optarg);
                                break;

                            case 'p':
                                wrwd.output('option "p" is set, optarg=' + option.optarg);
                                break;

                            case 'w':
                                wrwd.output('option "w" is set, optarg=' + option.optarg);
                                break;

                            default:
                                /* error message already emitted by getopt */
                                //mod_assert.equal('?', option.option);
                                //wrwdOutput('unexpected option %s %s', option.option, option.optarg);

                                break;
                            }
                        }

                        break;
                }                
            }
        };

        $(document).ready(function () {
            $('body').layout({
                center__paneSelector: ".outer-center",
                west__paneSelector: ".outer-west",
                north__paneSelector: ".outer-north",
                west__size: 225,
                north__size: 100,
                spacing_open: 4,
                spacing_closed: 6,
                north__maxSize: 200,
                center__childOptions: {
                    center__paneSelector: ".middle-center",
                    east__paneSelector: ".middle-east",
                    south__paneSelector: ".middle-south",
                    east__size: 225,
                    south__size: 25,
                    south__minSize: 25,
                    spacing_open: 4,
                    spacing_closed: 6
                }
            });

            $(".middle-south").console({
                promptLabel: ">",
                commandValidate: function (line) {
                    return true;
                },
                commandHandle: function (line) {
                    //                    try {
                    //                        var ret = eval(line);
                    //                        if (typeof ret != 'undefined') return ret.toString();
                    //                        else return true;
                    //                    }
                    //                    catch (e) { return e.toString(); }
                    wrwd.output(line);
                    wrwd.cmdParse(line);
                    return true;
                },
                animateScroll: false,
                promptHistory: false,
                disposable: true
            });

            self.setInterval(function () { $(".jquery-console-cursor").toggle(); }, 500);

            wrwd.output("Welcome to RWD web edition");
            wrwd.output("Copyright (C) 2013 viewpl");
            wrwd.output("type 'help -l' for details.");
        });

        $(window).keydown(function (k) {
            var code = (k.keyCode ? k.keyCode : k.which);
            if (code == '>') {
                $(".middle-south").click();
            }
        });

    </script>
</head>
<body>
    <div class="outer-north">Outer North</div>
    <div class="outer-west">Rwd Tree view</div>
    <div class="outer-center">
	    <div class="middle-center">
	    </div>
	    <div class="middle-east">Middle East</div>
	    <div class="middle-south">
        </div>
    </div>

</body>
</html>
